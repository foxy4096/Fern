<div class="modal is-active" id="upload-modal">
  <div class="modal-background" hx-get="{% url 'forum:close_modal' %}" hx-target="#modal-container"></div>
  <div class="modal-card">
    <header class="modal-card-head">
      <p class="modal-card-title">Manage Media</p>
      <button class="delete" aria-label="close"
              hx-get="{% url 'forum:close_modal' %}" 
              hx-target="#modal-container"></button>
    </header>

    <section class="modal-card-body">
      <div class="tabs is-boxed">
        <ul>
          <li class="is-active" id="tab-upload"><a hx-get="{% url 'forum:upload_form' %}" hx-target="#tab-content" hx-swap="innerHTML">Upload</a></li>
          <li id="tab-existing"><a hx-get="{% url 'forum:existing_uploads' %}" hx-target="#tab-content" hx-swap="innerHTML">My Files</a></li>
        </ul>
      </div>

      <div id="tab-content">
        {% include "forum/islands/upload_form.html" %}
      </div>
    </section>
  </div>
</div>
<script>
document.addEventListener('click', function (e) {
  const tab = e.target.closest('.tabs ul li');
  if (!tab) return;

  // Remove 'is-active' from all tabs in this group
  tab.parentElement.querySelectorAll('li').forEach(li => li.classList.remove('is-active'));
  tab.classList.add('is-active');
});
</script>
